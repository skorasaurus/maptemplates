<!DOCTYPE html>
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
        <script src="https://api.mapbox.com/mapbox-gl-js/v1.9.1/mapbox-gl.js"></script>
        <link href="https://api.mapbox.com/mapbox-gl-js/v1.9.1/mapbox-gl.css" rel="stylesheet" />

    </head>
    <style>
    #mapid {
    width: 80%; 
    height: 320px; 
    position: relative;
    margin-bottom: 3em; 
}

.cpl-map-marker {
        border: none;
        cursor: pointer;
        height: 56px;
        width: 56px;
        background-color: black;
      }

    </style>
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <div id="mapid"></div>
        <script>

// http://c.tile.openstreetmap.org/16/17923/24475.png

mapboxgl.accessToken = 'pk.eyJ1Ijoic2tvcmFzYXVydXMiLCJhIjoiaEdGTUZWTSJ9.osOC8tWU3bMaNprVNoEu7g';
var myMap = new mapboxgl.Map({

  container: 'mapid',
  center: [-81.68334, 41.51783],
  zoom: 11,
  style: 'mapbox://styles/skorasaurus/ck2ew6z291ct01cnmjc5lz50b?optimize=true',
  hash: true,
});

let locations = {"type":"FeatureCollection","features":[{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.66675,41.49756]},"properties":{"city":"Cleveland","housenumber":2200,"postcode":44115,"state":"OH","street":"East 30th Street","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"Sterling Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-7074","shortlink":"sterling"},"id":"node/368152695"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.57576,41.556]},"properties":{"city":"Cleveland","housenumber":856,"postcode":44110,"state":"OH","street":"East 152nd Street","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"Collinwood Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-6934","shortlink":"collinwood"},"id":"node/368152918"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.58444,41.46417]},"properties":{"city":"Cleveland","housenumber":14000,"postcode":44120,"state":"OH","street":"Kinsman Road","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"Mount Pleasant Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-7032","shortlink":"mtpleasant"},"id":"node/368153278"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.71268,41.45798]},"properties":{"city":"Cleveland","housenumber":3545,"postcode":44109,"state":"OH","street":"Fulton Road","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"Fulton Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-6969","shortlink":"fulton"},"id":"node/368153279"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.63788,41.47987]},"properties":{"city":"Cleveland","housenumber":7201,"postcode":44104,"state":"OH","street":"Kinsman Road","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"Garden Valley Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-6976","shortlink":"garden-valley"},"id":"node/2509710704"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.61719,41.52126]},"properties":{"city":"Cleveland","housenumber":10200,"postcode":44106,"state":"OH","street":"Superior Avenue","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"Langston Hughes Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-6975","shortlink":"langstonhughes"},"id":"node/2598454196"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.64249,41.51918]},"properties":{"city":"Cleveland","housenumber":6901,"postcode":44103,"state":"OH","street":"Superior Avenue","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"Addison Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-6906","shortlink":"addison"},"id":"node/2687918576"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.74166,41.47121]},"properties":{"city":"Cleveland","housenumber":8216,"postcode":44102,"state":"OH","street":"Lorain Avenue","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"Lorain Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-7011","shortlink":"lorain"},"id":"node/4233958921"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.56161,41.44954]},"properties":{"city":"Cleveland","housenumber":16918,"postcode":44128,"state":"OH","street":"Harvard Avenue","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"Harvard-Lee Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-6990","shortlink":"harvard-lee"},"id":"node/4552487007"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.62109,41.46448]},"properties":{"city":"Cleveland","housenumber":3463,"postcode":44104,"state":"OH","street":"East 93rd Street","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"Union Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-7088","shortlink":"union"},"id":"node/5218747905"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.69145,41.50132]},"properties":{"city":"Cleveland","postcode":44114,"state":"OH","street":"Superior Avenue East","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"Main Branch Cleveland Public Library","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-2800","shortlink":"main-library","housenumber":325},"id":"way/96672880"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.70716,41.43833]},"properties":{"city":"Cleveland","housenumber":4303,"postcode":44109,"state":"OH","street":"Pearl Road","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"South Brooklyn Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-7067","shortlink":"southbrooklyn"},"id":"way/100053901"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.7018,41.45427]},"properties":{"city":"Cleveland","housenumber":3706,"postcode":44109,"state":"OH","street":"Pearl Road","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"Brooklyn Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-6920","shortlink":"brooklyn"},"id":"way/103360558"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.71125,41.48244]},"properties":{"city":"Cleveland","housenumber":1900,"postcode":44113,"state":"OH","street":"Fulton Road","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"Carnegie West Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-6927","shortlink":"carnegie-west"},"id":"way/103649452"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.63816,41.45717]},"properties":{"city":"Cleveland","housenumber":7224,"postcode":44105,"state":"OH","street":"Broadway Avenue","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"Fleet Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-6962","shortlink":"fleet"},"id":"way/122805712"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.59144,41.45451]},"properties":{"city":"Cleveland","housenumber":3830,"postcode":44120,"state":"OH","street":"East 131st Street","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"East 131st Street Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-6941","shortlink":"east-131st-street"},"id":"way/123045809"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.73971,41.48194]},"properties":{"city":"Cleveland","housenumber":7910,"postcode":44102,"state":"OH","street":"Detroit Avenue","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"Walz Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-7095","shortlink":"walz"},"id":"way/127947364"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.80757,41.45138]},"properties":{"city":"Cleveland","housenumber":3805,"postcode":44111,"state":"OH","street":"West 157th Street","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"West Park Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-7102","shortlink":"west-park"},"id":"way/157054350"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.64956,41.48771]},"properties":{"city":"Cleveland","housenumber":5806,"postcode":44104,"state":"OH","street":"Woodland Avenue","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"Woodland Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-7109","shortlink":"woodland"},"id":"way/230604605"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.68562,41.47927]},"properties":{"city":"Cleveland","housenumber":850,"postcode":44113,"state":"OH","street":"Jefferson Avenue","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"Jefferson Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-7004","shortlink":"jefferson"},"id":"way/245532887"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.69717,41.47024]},"properties":{"city":"Cleveland","housenumber":3096,"postcode":44113,"state":"OH","street":"Scranton Road","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"South Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-7060","shortlink":"south"},"id":"way/263298047"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.60337,41.48482]},"properties":{"city":"Cleveland","housenumber":11535,"postcode":44104,"state":"OH","street":"Shaker Boulevard","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"Rice Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-7046","shortlink":"rice"},"id":"way/270853048"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.76782,41.46236]},"properties":{"city":"Cleveland","housenumber":11602,"postcode":44111,"state":"OH","street":"Lorain Avenue","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"Eastman Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-6955","shortlink":"eastman"},"id":"way/423872619"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.61338,41.50452]},"properties":{"city":"Cleveland","housenumber":1962,"postcode":44106,"state":"OH","street":"Stokes Boulevard","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"Martin Luther King Jr. Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-7018","shortlink":"martinlkingjr"},"id":"way/458313632"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.60245,41.54102]},"properties":{"city":"Cleveland","housenumber":11900,"postcode":44108,"state":"OH","street":"Saint Clair Avenue","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"Glenville Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-6983","shortlink":"glenville"},"id":"way/459390358"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.62309,41.51398]},"properties":{"city":"Cleveland","housenumber":1566,"postcode":44106,"state":"OH","street":"Crawford Road","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"Hough Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-6997","shortlink":"hough"},"id":"way/459390359"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.56179,41.58292]},"properties":{"city":"Cleveland","housenumber":17109,"postcode":44110,"state":"OH","street":"Lake Shore Boulevard","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"Memorial-Nottingham Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-7039","shortlink":"memorialnottingham"},"id":"way/467672584"},{"type":"Feature","geometry":{"type":"Point","coordinates":[-81.79019,41.43414]},"properties":{"city":"Cleveland","housenumber":4421,"postcode":44135,"state":"OH","street":"West 140th Street","amenity":"library","internet_access":"wlan","internet_access:fee":"no","name":"Rockport Branch","opening_hours":"Mo, Tu, Th 10:00-19:00; We, Fr, Sa 10:00-18:00; PH off","operator":"Cleveland Public Library","phone":"216-623-7053","shortlink":"rockport"},"id":"way/480861228"}]}; 

myMap.on('load', function() {
        myMap.addSource('librariesSource', {
            type: 'geojson',
            data: locations,
        });
        console.log('success');
        // myMap.addLayer({
        //     id: 'librariesID',
        //     type: 'circle',
        //     source: 'librariesSource',
        //     paint: {
        //         // Use step expressions (https://docs.mapbox.com/mapbox-gl-js/style-spec/#expressions-step)
        //         'circle-opacity': 0.98,
        //         'circle-color': '#000000',
        //         'circle-radius': 10
        //     }
        // });
       addMarkers();    
});



// create elements for each marker, b/c I can't use markers in mapbox for some reason?!
function addMarkers() {
  /* For each feature in the GeoJSON object above: */
  locations.features.forEach(function(marker) {
    /* Create a div element for the marker. */
    var el = document.createElement('div');
    console.log("marker id for " + marker.properties.shortlink + "made");
    /* Assign a unique `id` to the marker. */
    el.id = "marker-" + marker.properties.shortlink;
    /* Assign the `marker` class to each marker for styling. */
    el.className = 'cpl-map-marker';
    
    
    /**
     * Create a marker using the div element
     * defined above and add it to the map.
    **/
    new mapboxgl.Marker(el, { offset: [0, -23] })
      .setLngLat(marker.geometry.coordinates)
      .addTo(myMap);
  });
}



myMap.on('click', 'librariesID', function(e) {
new mapboxgl.Popup()
.setLngLat(e.lngLat)
.setHTML('<a href="'+e.features[0].properties.shortlink+'">'+e.features[0].properties.name +'</a><br>' + e.features[0].properties.housenumber + ' ' + e.features[0].properties.street+ '<br>' + 
	    '<a href="https://www.google.com/maps/search/'+e.features[0].properties.housenumber + ' ' + e.features[0].properties.street+ " Cleveland" + ' ' + e.features[0].properties.postcode + '">'+' Get directions </a>')
.addTo(myMap);
});

        </script>


    </body>
</html>